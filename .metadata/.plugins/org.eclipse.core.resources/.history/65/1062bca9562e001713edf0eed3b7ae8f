/*
 * memory.cpp
 *
 *  Created on: Apr 27, 2017
 *      Author: Paul
 */

#include <os/memory.hpp>
#include "bitmap.hpp"
#include <cstdint>
#include <cstddef>
#include <cassert>
// memory.c stuff
namespace os{
		resource_map::resource_map(size_t size, void* addr, const char* name, size_t nelm) :
			: name(name), _limit(static_cast<mapent>(addr)) {
			assert(!(nelem < 2 || addr <= 0 || size < 0))
	    	    /* initially the first entry describes all free space */
	    	    ep = (struct mapent *)mp + 1;
	    	    ep->m_size = size;
	    	    ep->m_addr = addr;
	    	    /* the remaining slots are unused (indicated by m_addr == 0) */
	    	    while (++ep < mp->m_limit)
	    	        ep->m_addr = 0;
		}

};
